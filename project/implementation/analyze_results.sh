#!/bin/bash

# This script takes in a csv file generated by RocksBench and runs pilot on all four data columns
# The result is four txt files with the same original file name but also a suffix of "_<PARAM_NAME>"

if [ ! $# -eq 1 ]; then
  echo "Please provide a file to analyze"
  exit 1
fi

if [ ! -e "$1" ]; then
  echo "File $1 doesn't exist"
  exit 1
fi

cat $1 | pilot analyze -i 1 -f 0 - > $(ls $1 | cut -d '.' -f 1)_put.txt
cat $1 | pilot analyze -i 1 -f 1 - > $(ls $1 | cut -d '.' -f 1)_get.txt
cat $1 | pilot analyze -i 1 -f 2 - > $(ls $1 | cut -d '.' -f 1)_delete.txt
